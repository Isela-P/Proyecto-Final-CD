knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
#Cargar librerías necesarias
library(readr)
library(here)
library(dplyr)
library(stringr)
library(janitor)
library(ggplot2)
library(factoextra)
#lectura directa desde URL
calidad_aire<- read.csv("https://www.datos.gob.mx/dataset/bd428f6b-bc9a-4617-8c4b-9dd320101f30/resource/70dfeb69-065b-4ed4-8922-505602666250/download/d3_aire01_49_1.csv")
#Lectura local
incendios<- read_csv(here("data", "raw", "incendios.csv"))
#observamos rápidamente los datos
str(calidad_aire)
#Ya que existen 11 columnas. Debemos seleccionar unicamente las relevantes para el estudio
calidad_aire<- select(calidad_aire, Entidad, Municipio, Tipo_de_Fuente,PM_2_5,CO,SO_2,NOx)
str(calidad_aire)
summary(calidad_aire)
#Selección de columnas de interés
incendios<- select(incendios, Entidad, Municipio, Causa,Total_hectareas, Fecha_Termino)
str(incendios)
summary(incendios)
#Estudio únicamente del Estado de Puebla
calidad_aire<- filter(calidad_aire, Entidad== "Puebla")
incendios<- filter(incendios, Entidad=="Puebla")
#Detección y eliminación de Duplicados
sum(duplicated(calidad_aire))
calidad_aire<- calidad_aire[!duplicated(calidad_aire), ]
sum(duplicated(calidad_aire)) #rectificar eliminación de duplicados.
sum(duplicated(incendios))
incendios<- incendios[!duplicated(incendios), ]
sum(duplicated(incendios)) #rectificar la eliminación de duplicados.
#Oservar cuántos datos Nulos tenemos por columna
summarise_all(calidad_aire, funs(sum(is.na(.))))
#Eliminar los datos nulos.
calidad_aire<- na.omit(calidad_aire)
summarise_all(calidad_aire, funs(sum(is.na(.))))
summarise_all(incendios, funs(sum(is.na(.)))) #No existen datos Nulos.
#Estandarizar nombres de columnas
incendios<-janitor::clean_names(incendios)
calidad_aire<- janitor::clean_names(calidad_aire)
colnames(calidad_aire)
#Debido a que 2 columnas
#mantienen nombres dificies se hará un rename
calidad_aire<-calidad_aire%>%
rename(pm_25 = pm_2_5)
calidad_aire<-calidad_aire%>%
rename(nox =n_ox)
calidad_aire<-calidad_aire%>%
rename(so2 =so_2)
colnames(calidad_aire)
#rectificar formato de fechas
incendios<- incendios%>%
mutate(fecha_termino=as.Date(fecha_termino, format("%Y-%m-%d"))
)
head(incendios$fecha_termino)
#Guardar datos limpios
write.csv(incendios,"data/processed/clean_incendios.csv",row.names = FALSE)
